#include <stdio.h>
#include <time.h>
#include <string.h>

#include "msq-message.h"

void msq_message_print(msq_message_t message){
  time_t seconds = time(NULL);
  struct tm *timeinfo = localtime(&seconds);
  printf("%04d-%02d-%02d %02d:%02d:%02d: %d: %s\n",1900+timeinfo->tm_year,timeinfo->tm_mon+1,timeinfo->tm_mday,timeinfo->tm_hour,timeinfo->tm_min,timeinfo->tm_sec, message.type, message.text);
}

int msq_message_set_text(msq_message_t *message, const char *text){
  if(strlen(text) > MSQ_MESSAGE_TEXT_SIZE){
    fprintf(stderr, "./msq-client.out:msq-message.c:43: Unable to set the \"%s\" message text because its \"%ld\" size is greater than \"%d\".\n", text, strlen(text), MSQ_MESSAGE_TEXT_SIZE);
    return -1;
  }
  strcpy(message->text, text);
  return 0;
}

int msq_message_set_type(msq_message_t *message, long int type){
  if (type >= 0){
    message->type=type;
    return 0;
  }
  return -1;
}
