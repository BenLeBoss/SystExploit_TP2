CC=gcc
FLAGS=-std=c89 -pedantic -Wall -Werror -D_GNU_SOURCE -g
RM=rm -fv
.PHONY: all clean
.SECONDARY: msq-message.o
all: msq-client.out msq-server.out
%.o: %.c %.h
	$(CC) $(FLAGS) -c -o $@ $<
%.out: %.c msq-common.o msq-message.o
	$(CC) $(FLAGS) -o $@ $^
msq-common.o: msq-common.c msq-common.h msq-message.h
	$(CC) $(FLAGS) -c -o $@ $<
clean:
	$(RM) *.o *.out
